# Firefox Enterprise Policies schema for Browser Policy Manager
# Version: 0.1.0
version: 0.1.0
vendor: firefox
policies:
  - id: disable_app_update
    key: DisableAppUpdate
    type: boolean
    default: true
    title_i18n: policy.disable_app_update.title
    description_i18n: policy.disable_app_update.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.updates, widget: switch }

  - id: app_auto_update
    key: AppAutoUpdate
    type: boolean
    default: false
    title_i18n: policy.app_auto_update.title
    description_i18n: policy.app_auto_update.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.updates, widget: switch }
    depends_on:
      not: disable_app_update

  - id: disable_system_addon_update
    key: DisableSystemAddonUpdate
    type: boolean
    default: true
    title_i18n: policy.disable_system_addon_update.title
    description_i18n: policy.disable_system_addon_update.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.updates, widget: switch }

  - id: disable_telemetry
    key: DisableTelemetry
    type: boolean
    default: true
    title_i18n: policy.disable_telemetry.title
    description_i18n: policy.disable_telemetry.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.privacy, widget: switch }

  - id: disable_firefox_accounts
    key: DisableFirefoxAccounts
    type: boolean
    default: true
    title_i18n: policy.disable_firefox_accounts.title
    description_i18n: policy.disable_firefox_accounts.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.accounts, widget: switch }

  - id: disable_pocket
    key: DisablePocket
    type: boolean
    default: true
    title_i18n: policy.disable_pocket.title
    description_i18n: policy.disable_pocket.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.ui_content, widget: switch }

  - id: disable_private_browsing
    key: DisablePrivateBrowsing
    type: boolean
    default: false
    title_i18n: policy.disable_private_browsing.title
    description_i18n: policy.disable_private_browsing.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.privacy, widget: switch }

  - id: block_about_config
    key: BlockAboutConfig
    type: boolean
    default: true
    title_i18n: policy.block_about_config.title
    description_i18n: policy.block_about_config.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.lockdown, widget: switch }

  - id: block_about_profiles
    key: BlockAboutProfiles
    type: boolean
    default: true
    title_i18n: policy.block_about_profiles.title
    description_i18n: policy.block_about_profiles.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.lockdown, widget: switch }

  - id: block_addons_manager
    key: BlockAboutAddons
    type: boolean
    default: false
    title_i18n: policy.block_addons_manager.title
    description_i18n: policy.block_addons_manager.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.lockdown, widget: switch }

  - id: password_manager_enabled
    key: PasswordManagerEnabled
    type: boolean
    default: false
    title_i18n: policy.password_manager_enabled.title
    description_i18n: policy.password_manager_enabled.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.passwords, widget: switch }

  - id: offer_to_save_logins
    key: OfferToSaveLogins
    type: boolean
    default: false
    title_i18n: policy.offer_to_save_logins.title
    description_i18n: policy.offer_to_save_logins.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.passwords, widget: switch }
    depends_on:
      equals: { password_manager_enabled: true }

  - id: primary_password_required
    key: PrimaryPassword
    type: boolean
    default: false
    title_i18n: policy.primary_password_required.title
    description_i18n: policy.primary_password_required.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.passwords, widget: switch }

  - id: homepage
    key: Homepage
    type: object
    title_i18n: policy.homepage.title
    description_i18n: policy.homepage.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      URL:
        {
          type: string,
          constraints: { pattern: "^https?://" },
          ui: { widget: input, placeholder: "https://intranet.example.local/" },
        }
      Locked: { type: boolean, default: true }
      StartPage:
        {
          type: enum,
          enum: [none, homepage, previous-session],
          default: homepage,
        }
    ui: { group_i18n: group.ui_content }

  - id: default_download_directory
    key: DefaultDownloadDirectory
    type: string
    default: ""
    title_i18n: policy.default_download_directory.title
    description_i18n: policy.default_download_directory.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui:
      {
        group_i18n: group.downloads,
        widget: input,
        placeholder: "/home/user/Downloads",
      }

  - id: download_directory
    key: DownloadDirectory
    type: string
    default: ""
    title_i18n: policy.download_directory.title
    description_i18n: policy.download_directory.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.downloads, widget: input }

  - id: always_ask_downloads
    key: AlwaysAskDownloadLocation
    type: boolean
    default: false
    title_i18n: policy.always_ask_downloads.title
    description_i18n: policy.always_ask_downloads.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.downloads, widget: switch }

  - id: extension_settings
    key: ExtensionSettings
    type: object
    title_i18n: policy.extension_settings.title
    description_i18n: policy.extension_settings.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.extensions, widget: extension-table }
    examples:
      - '{ "*": { "installation_mode": "blocked" }, "uBlock0@raymondhill.net": { "installation_mode": "force_installed", "install_url": "https://addons.mozilla.org/..." } }'

  - id: extensions
    key: Extensions
    type: array
    title_i18n: policy.extensions.title
    description_i18n: policy.extensions.desc
    docs_url: https://github.com/mozilla/policy-templates
    items: { type: string }
    ui: { group_i18n: group.extensions, widget: textarea }

  - id: popup_blocking
    key: PopupBlocking
    type: boolean
    default: true
    title_i18n: policy.popup_blocking.title
    description_i18n: policy.popup_blocking.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.security, widget: switch }

  - id: certificates
    key: Certificates
    type: object
    title_i18n: policy.certificates.title
    description_i18n: policy.certificates.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      Install:
        {
          type: array,
          items: { type: string },
          ui:
            {
              widget: textarea,
              placeholder: "/etc/pki/ca-trust/source/anchors/rootCA.crt",
            },
        }
      ImportEnterpriseRoots: { type: boolean, default: true }
    ui: { group_i18n: group.security }

  - id: proxy
    key: Proxy
    type: object
    title_i18n: policy.proxy.title
    description_i18n: policy.proxy.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      Mode:
        {
          type: enum,
          enum: [none, system, manual, autoDetect, autoConfig],
          default: system,
        }
      HTTPProxy: { type: string }
      SSLProxy: { type: string }
      SOCKSProxy: { type: string }
      SOCKSPort: { type: integer, constraints: { min: 1, max: 65535 } }
      SOCKSVersion: { type: enum, enum: [4, 5], default: 5 }
      UseHTTPProxyForAllProtocols: { type: boolean, default: false }
      AutoConfigURL: { type: string }
    ui: { group_i18n: group.network }

  - id: dns_over_https
    key: DNSOverHTTPS
    type: object
    title_i18n: policy.doh.title
    description_i18n: policy.doh.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      Enabled: { type: boolean, default: false }
      ProviderURL: { type: string, constraints: { pattern: "^https://" } }
      Locked: { type: boolean, default: true }
    ui: { group_i18n: group.network }

  - id: captive_portal
    key: CaptivePortal
    type: boolean
    default: true
    title_i18n: policy.captive_portal.title
    description_i18n: policy.captive_portal.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.network, widget: switch }

  - id: disable_pdf_viewer
    key: PDFjsDisabled
    type: boolean
    default: false
    title_i18n: policy.disable_pdf_viewer.title
    description_i18n: policy.disable_pdf_viewer.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.ui_content, widget: switch }

  - id: disable_feedback
    key: DisableFeedbackCommands
    type: boolean
    default: true
    title_i18n: policy.disable_feedback.title
    description_i18n: policy.disable_feedback.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.ui_content, widget: switch }

  - id: disable_safebrowsing_downloads
    key: DisableSafeBrowsingDownloadChecks
    type: boolean
    default: false
    title_i18n: policy.disable_safebrowsing_downloads.title
    description_i18n: policy.disable_safebrowsing_downloads.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.security, widget: switch }

  - id: disable_master_password_creation
    key: DisableMasterPasswordCreation
    type: boolean
    default: true
    title_i18n: policy.disable_master_password_creation.title
    description_i18n: policy.disable_master_password_creation.desc
    docs_url: https://github.com/mozilla/policy-templates
    deprecated:
      note_i18n: policy.disable_master_password_creation.deprecated
      replaced_by: primary_password_required
    ui: { group_i18n: group.passwords, widget: switch }

  - id: extensions_auto_disable_scopes
    key: ExtensionsAutoDisableScopes
    type: integer
    default: 0
    title_i18n: policy.extensions_auto_disable_scopes.title
    description_i18n: policy.extensions_auto_disable_scopes.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.extensions, widget: number }

  - id: disable_firefox_studies
    key: DisableFirefoxStudies
    type: boolean
    default: true
    title_i18n: policy.disable_firefox_studies.title
    description_i18n: policy.disable_firefox_studies.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.privacy, widget: switch }

  - id: search_engines
    key: SearchEngines
    type: object
    title_i18n: policy.search_engines.title
    description_i18n: policy.search_engines.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      Default: { type: string }
      PreventInstalls: { type: boolean, default: true }
      Add:
        type: array
        items:
          type: object
          properties:
            Name: { type: string }
            URLTemplate: { type: string }
            Method: { type: enum, enum: [GET, POST], default: GET }
    ui: { group_i18n: group.search }

  - id: disable_password_reveal
    key: DisablePasswordReveal
    type: boolean
    default: true
    title_i18n: policy.disable_password_reveal.title
    description_i18n: policy.disable_password_reveal.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.passwords, widget: switch }

  - id: tracking_protection
    key: EnableTrackingProtection
    type: boolean
    default: true
    title_i18n: policy.tracking_protection.title
    description_i18n: policy.tracking_protection.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.security, widget: switch }

  - id: permissions
    key: Permissions
    type: object
    title_i18n: policy.permissions.title
    description_i18n: policy.permissions.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      Camera: { type: enum, enum: [ask, allow, block], default: ask }
      Microphone: { type: enum, enum: [ask, allow, block], default: ask }
      Location: { type: enum, enum: [ask, allow, block], default: ask }
    ui: { group_i18n: group.permissions }

  - id: popups_allowed_for_urls
    key: PopupsAllowed
    type: array
    title_i18n: policy.popups_allowed.title
    description_i18n: policy.popups_allowed.desc
    docs_url: https://github.com/mozilla/policy-templates
    items: { type: string }
    ui:
      group_i18n: group.security
      widget: textarea
      placeholder: |
        https://trusted-app.local
        https://sso.example.com

  - id: preferences
    key: Preferences
    type: object
    title_i18n: policy.preferences.title
    description_i18n: policy.preferences.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.advanced, widget: kv-table }
    examples:
      - '{ "browser.tabs.warnOnClose": false, "privacy.trackingprotection.enabled": true }'

  - id: disable_profile_refresh
    key: DisableProfileRefresh
    type: boolean
    default: true
    title_i18n: policy.disable_profile_refresh.title
    description_i18n: policy.disable_profile_refresh.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.lockdown, widget: switch }

  - id: disable_profile_import
    key: DisableProfileImport
    type: boolean
    default: true
    title_i18n: policy.disable_profile_import.title
    description_i18n: policy.disable_profile_import.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.lockdown, widget: switch }

  - id: disable_set_desktop_background
    key: DisableSetDesktopBackground
    type: boolean
    default: true
    title_i18n: policy.disable_set_desktop_background.title
    description_i18n: policy.disable_set_desktop_background.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.lockdown, widget: switch }

  - id: webrtc
    key: WebRTC
    type: object
    title_i18n: policy.webrtc.title
    description_i18n: policy.webrtc.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      HideLocalIPsWithMDNS: { type: boolean, default: true }
    ui: { group_i18n: group.network }

  - id: disable_profile_customization
    key: DisableProfileCustomization
    type: boolean
    default: true
    title_i18n: policy.disable_profile_customization.title
    description_i18n: policy.disable_profile_customization.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.lockdown, widget: switch }

  - id: kiosk_mode
    key: KioskMode
    type: boolean
    default: false
    title_i18n: policy.kiosk_mode.title
    description_i18n: policy.kiosk_mode.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.kiosk, widget: switch }

  - id: printing
    key: Printing
    type: object
    title_i18n: policy.printing.title
    description_i18n: policy.printing.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      DisablePrintPreview: { type: boolean, default: false }
      DisablePrinting: { type: boolean, default: false }
    ui: { group_i18n: group.kiosk }

  - id: disable_app_update_url
    key: DisableAppUpdateURL
    type: boolean
    default: false
    title_i18n: policy.disable_app_update_url.title
    description_i18n: policy.disable_app_update_url.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.lockdown, widget: switch }

  - id: no_default_bookmarks
    key: NoDefaultBookmarks
    type: boolean
    default: true
    title_i18n: policy.no_default_bookmarks.title
    description_i18n: policy.no_default_bookmarks.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.ui_content, widget: switch }

  - id: disable_search_suggestions
    key: DisableSearchSuggestions
    type: boolean
    default: true
    title_i18n: policy.disable_search_suggestions.title
    description_i18n: policy.disable_search_suggestions.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.search, widget: switch }

  - id: disable_geolocation
    key: DisableGeolocation
    type: boolean
    default: false
    title_i18n: policy.disable_geolocation.title
    description_i18n: policy.disable_geolocation.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.permissions, widget: switch }

  - id: firefox_suggest
    key: FirefoxSuggest
    type: object
    title_i18n: policy.firefox_suggest.title
    description_i18n: policy.firefox_suggest.desc
    docs_url: https://github.com/mozilla/policy-templates
    properties:
      SponsoredSuggestions: { type: boolean, default: false }
      ImproveSuggest: { type: boolean, default: false }
    ui: { group_i18n: group.search }

  - id: extensions_enabled
    key: ExtensionsEnabled
    type: array
    title_i18n: policy.extensions_enabled.title
    description_i18n: policy.extensions_enabled.desc
    docs_url: https://github.com/mozilla/policy-templates
    items: { type: string }
    ui: { group_i18n: group.extensions, widget: textarea }

  - id: disable_filesystem
    key: DisableFileSystem
    type: boolean
    default: false
    title_i18n: policy.disable_filesystem.title
    description_i18n: policy.disable_filesystem.desc
    docs_url: https://github.com/mozilla/policy-templates
    ui: { group_i18n: group.security, widget: switch }
